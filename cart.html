{% extends "base.html" %}

{% block title %}Your Cart - Foodie Express{% endblock %}

{% block content %}
<h2>Your Cart</h2>
{% if cart_items %}
  <div class="card">
    <table style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr style="border-bottom: 2px solid #ddd;">
          <th style="text-align: left; padding: 1rem;">Item</th>
          <th style="text-align: center; padding: 1rem;">Quantity</th>
          <th style="text-align: right; padding: 1rem;">Price</th>
          <th style="text-align: right; padding: 1rem;">Total</th>
          <th style="text-align: center; padding: 1rem;">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for item in cart_items %}
        <tr style="border-bottom: 1px solid #eee;">
          <td style="padding: 1rem;">
            <strong>{{ item.name }}</strong><br>
            <small style="color: #666;">{{ item.category }}</small>
          </td>
          <td style="text-align: center; padding: 1rem;">
            <form method="POST" action="/update_cart" style="display: inline;">
              <input type="hidden" name="cart_id" value="{{ item.cart_id }}">
              <input type="number" name="quantity" value="{{ item.quantity }}" min="0" max="10" 
                     style="width: 60px; text-align: center;" onchange="this.form.submit()">
            </form>
          </td>
          <td style="text-align: right; padding: 1rem;">â‚¹{{ "%.2f"|format(item.price) }}</td>
          <td style="text-align: right; padding: 1rem;">â‚¹{{ "%.2f"|format(item.price * item.quantity) }}</td>
          <td style="text-align: center; padding: 1rem;">
            <a href="/remove_from_cart/{{ item.cart_id }}" class="btn btn-secondary btn-sm" 
               onclick="return confirm('Remove this item?')">Remove</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <div class="text-right mt-2">
      <h3 style="color: #d32f2f;">Total: â‚¹{{ "%.2f"|format(total) }}</h3>
    </div>
    <div class="text-center mt-2">
      <a href="/" class="btn btn-secondary" style="margin-right: 1rem;">Continue Shopping</a>
      <a href="/place_order" class="btn">Proceed to Checkout</a>
    </div>
  </div>
{% else %}
  <div class="card text-center">
    <div style="font-size: 4rem; margin-bottom: 1rem;">ðŸ›’</div>
    <h3>Your cart is empty!</h3>
    <p style="margin: 1rem 0;">Add some delicious items to get started.</p>
    <a href="/" class="btn">Browse Menu</a>
  </div>
{% endif %}
{% endblock %}